<% content_for :stylesheets do %>
  <%= stylesheet_link_tag "edit_history" %>
<% end %>

<h2>買い物リスト履歴</h2>

<div class="edit_history_table">
<table>
  <thead>
    <tr>
      <th>ユーザー</th>
      <th>リスト名</th>
      <th>アイテム名</th>
      <th>アクション</th>
      <th>日時</th>
    </tr>
  </thead>
  <tbody>
    <% @edit_histories.each do |history| %>
      <tr>
        <td><%= history.user.name %></td>
        <td><%= history.shopping_list&.title %></td>
        <td>
          <% case history.action %>
          <% when "created" %>
            <%= history.after_name %>（追加）
          <% when "updated" %>
            名前: <%= history.before_name %> → <%= history.after_name %><br>
            数量: <%= history.before_quantity %> → <%= history.after_quantity %><br>
            カテゴリ: <%= history.before_category %> → <%= history.after_category %>
          <% when "deleted" %>
            <%= history.before_name %>（削除）
          <% end %>
        </td>
        <td class="<%= history.action %>">
          <%= t("enums.edit_history.action.#{history.action}") %>
        </td>
        <td><%= history.created_at.strftime("%-m月%-d日 %-H:%M") %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<%= link_to "買い物リスト一覧に戻る", shopping_lists_path %>